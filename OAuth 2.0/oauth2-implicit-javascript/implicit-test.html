<!-- Include Bootstrap from a CDN (Content Delivery Network) -->
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<!DOCTYPE html>
<html lang="en">
    <HEAD>
		<script type="text/javascript" src="../openidconnect.js"></script>

        <script>
            var clientInfo = {
                client_id : 'spa_clientId',
                redirect_uri : 'https://spa.safewhere.local/login-callback.html'
            };

            var providerInfo = OIDC.discover('https://develop.safewhere.local/runtime/');
            OIDC.setClientInfo( clientInfo );
            OIDC.setProviderInfo( providerInfo );
            OIDC.storeInfo(providerInfo, clientInfo);
            // Remove State and Nonce from previous session
            sessionStorage.removeItem('state');
            sessionStorage.removeItem('nonce');
            loginRequest = OIDC.generateLoginRequest({scope : 'read write', response_type : 'token'});
        </script>

    </HEAD>

    <BODY>
      <div class="container" style="margin-bottom: 50px;">
        <h1>Implicit Flow Test Login Page</h1>
        <br>
        <b>clientInfo</b>
        <div id="clientInfo">
          clientInfo not found
        </div>
        <script type="text/javascript">
        document.getElementById('clientInfo').innerHTML = JSONObjToHTMLTable(clientInfo);
        </script>
        <b>loginRequest</b>
        <div id="loginRequest">
          loginRequest not generated yet
        </div>
        <script type="text/javascript">
        document.getElementById('loginRequest').innerHTML = JSONObjToHTMLTable(loginRequest);
        </script>
        <br>
        <div class="buttons">
          <button onClick="OIDC.login( {scope : 'read write',
          response_type : 'token'} );"
          type="button" class="btn btn-success" >Authenticate</button>
        </div>
      </div>
    </BODY>

</HTML>
